<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>树莓派温控散热风扇 | YoungsunLi</title>
    <meta name="generator" content="VuePress 1.4.1">
    <link rel="icon" href="/favicon.ico">
    <meta name="description" content="YoungsunLi's Blog">
    <link rel="preload" href="/assets/css/0.styles.c81f41a2.css" as="style"><link rel="preload" href="/assets/js/app.c215e177.js" as="script"><link rel="preload" href="/assets/js/3.cfdf7f78.js" as="script"><link rel="preload" href="/assets/js/4.e0fcf125.js" as="script"><link rel="prefetch" href="/assets/js/10.9b7a9b7c.js"><link rel="prefetch" href="/assets/js/11.8b882e5c.js"><link rel="prefetch" href="/assets/js/5.e6ae3b16.js"><link rel="prefetch" href="/assets/js/6.304ebb61.js"><link rel="prefetch" href="/assets/js/7.24d050c6.js"><link rel="prefetch" href="/assets/js/8.b545aef0.js"><link rel="prefetch" href="/assets/js/9.075ee081.js"><link rel="prefetch" href="/assets/js/vuejs-paginate.4ecb46e2.js">
    <link rel="stylesheet" href="/assets/css/0.styles.c81f41a2.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div id="global-layout" data-v-388a5773><div class="theme-container" data-v-388a5773><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">YoungsunLi</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/about/" class="nav-link">
  关于
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="认识的人" class="dropdown-title"><span class="title">认识的人</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="http://sinlo.net" target="_blank" rel="noopener noreferrer" class="nav-link external">
  罗东荣的博客
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="做过的事" class="dropdown-title"><span class="title">做过的事</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/YoungsunLi" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/about/" class="nav-link">
  关于
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="认识的人" class="dropdown-title"><span class="title">认识的人</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="http://sinlo.net" target="_blank" rel="noopener noreferrer" class="nav-link external">
  罗东荣的博客
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="做过的事" class="dropdown-title"><span class="title">做过的事</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/YoungsunLi" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>树莓派温控散热风扇</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/posts/raspberry-pi-auto-fan/#获取soc实时温度" class="sidebar-link">获取SoC实时温度</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/posts/raspberry-pi-auto-fan/#风扇供电问题" class="sidebar-link">风扇供电问题</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/posts/raspberry-pi-auto-fan/#可以通过-gpio-针脚直接供电驱动吗" class="sidebar-link">可以通过 GPIO 针脚直接供电驱动吗?</a></li><li class="sidebar-sub-header"><a href="/posts/raspberry-pi-auto-fan/#通过-5v-针脚或者-3v3-针脚供电" class="sidebar-link">通过 5V 针脚或者 3V3 针脚供电</a></li></ul></li><li><a href="/posts/raspberry-pi-auto-fan/#如何控制风扇的开关" class="sidebar-link">如何控制风扇的开关?</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/posts/raspberry-pi-auto-fan/#使用三极管作为风扇开关" class="sidebar-link">使用三极管作为风扇开关</a></li><li class="sidebar-sub-header"><a href="/posts/raspberry-pi-auto-fan/#使用-python-控制风扇" class="sidebar-link">使用 Python 控制风扇</a></li></ul></li><li><a href="/posts/raspberry-pi-auto-fan/#下面进行实测" class="sidebar-link">下面进行实测</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/posts/raspberry-pi-auto-fan/#实际用到的设备和元器件" class="sidebar-link">实际用到的设备和元器件:</a></li><li class="sidebar-sub-header"><a href="/posts/raspberry-pi-auto-fan/#接线准备" class="sidebar-link">接线准备</a></li><li class="sidebar-sub-header"><a href="/posts/raspberry-pi-auto-fan/#安装到树莓派4b" class="sidebar-link">安装到树莓派4B</a></li><li class="sidebar-sub-header"><a href="/posts/raspberry-pi-auto-fan/#运行温控程序-auto-fan-py" class="sidebar-link">运行温控程序 auto_fan.py</a></li></ul></li><li><a href="/posts/raspberry-pi-auto-fan/#还能做些什么" class="sidebar-link">还能做些什么?</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="树莓派温控散热风扇"><a href="#树莓派温控散热风扇" class="header-anchor">#</a> 树莓派温控散热风扇</h1> <p>根据树莓派 SoC 的温度智能自动控制风扇的开关, 满足条件: 当温度过高是开启风扇, 温度适宜时关闭风扇.</p> <h2 id="获取soc实时温度"><a href="#获取soc实时温度" class="header-anchor">#</a> 获取SoC实时温度</h2> <p>通过读取 <code>/sys/class/thermal/thermal_zone0/temp</code> 可以得到一个温度值, 根据<a href="https://www.raspberrypi.org/documentation/hardware/raspberrypi/frequency-management.md" target="_blank" rel="noopener noreferrer">RaspberryPi官方文档<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>介绍,
并没有独立监控 CPU 温度或者 GPU 温度的传感器, 所以通过该文件获取到的温度实际上是整个 SoC 芯片的温度; 但是 CPU 和 GPU 都在这个芯片上, 所以我以这个温度作为温控阈值参考.</p> <h4 id="通过以下命令可以查看当前soc温度-结果除以1000-单位-℃"><a href="#通过以下命令可以查看当前soc温度-结果除以1000-单位-℃" class="header-anchor">#</a> 通过以下命令可以查看当前SoC温度(结果除以1000, 单位/℃)</h4> <div class="language-shell script line-numbers-mode"><pre class="language-shell"><code>pi@raspberrypi:~ $ <span class="token function">cat</span> /sys/class/thermal/thermal_zone0/temp
<span class="token number">42425</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="风扇供电问题"><a href="#风扇供电问题" class="header-anchor">#</a> 风扇供电问题</h2> <h3 id="可以通过-gpio-针脚直接供电驱动吗"><a href="#可以通过-gpio-针脚直接供电驱动吗" class="header-anchor">#</a> 可以通过 GPIO 针脚直接供电驱动吗?</h3> <p><strong>我们无法直接通过 GPIO 来驱动风扇并控制它的开关,</strong> 因为根据<a href="https://www.raspberrypi.org/documentation/faqs/#pi-power" target="_blank" rel="noopener noreferrer">RaspberryPi官方FAQ文档<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>介绍,
GPIO 的输出电压是 3.3V, 并且安全的最高电流输出是 16mA, 峰值为50mA, 某些 GPIO 针脚默认输出 8mA; 所以即使你的风扇额定电压为 3V, 这么小的电流也难以驱动它, 即使能驱动也不推荐这么干, 一个原因是可能会损坏树莓派,
根据<a href="https://www.raspberrypi.org/documentation/usage/gpio/README.md" target="_blank" rel="noopener noreferrer">RaspberryPi官方GPIO使用文档<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>明确的警告指出, 不能将电机直接接在 GPIO 针脚上(风扇实际上就是由电机驱动的), 另一个是通过这么小电流驱动的风扇真的能起到散热作用吗?</p> <h3 id="通过-5v-针脚或者-3v3-针脚供电"><a href="#通过-5v-针脚或者-3v3-针脚供电" class="header-anchor">#</a> 通过 5V 针脚或者 3V3 针脚供电</h3> <p><a href="https://pinout.xyz/pinout/pin2_5v_power" target="_blank" rel="noopener noreferrer">Pinout 5V针脚文档<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>中指出树莓派的 5V 针脚是直接连通到电源的, 使用 5V 针脚相当于与树莓派并联使用一个电源适配器, 所以根据 &quot;并联分流&quot; 该针脚能提供的电流实际上就等于:
<code>(电源适配器的额定最高电流) - (树莓派本身运行所占用的电流)</code>, 所以假设你使用符合要求的电源适配器, 5V 针脚是完全可以直接驱动额定电压为 5V 的风扇.<br>
而树莓派的 3V3 针脚, <a href="https://pinout.xyz/pinout/pin1_3v3_power" target="_blank" rel="noopener noreferrer">Pinout 3V3针脚文档<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>中也指出了在型号 B+ 之前的电流最高能提供 50mA, 但是在 B+ 之后的树莓派, 3V3 针脚则可以提供高达 500mA 的电流;
所以当使用额定电压为 3V 的风扇时, 使用 3V3 针脚也是可以直接安全的驱动风扇滴.</p> <h2 id="如何控制风扇的开关"><a href="#如何控制风扇的开关" class="header-anchor">#</a> 如何控制风扇的开关?</h2> <p>当直接将风扇接到合适的电源上, 风扇是始终处于运行状态. 现在我需要根据 SoC 的温度来自动控制它的开关, 所以可以通过给<strong>风扇与电源连接之间加一个开关</strong>, 然后通过某一个 <strong>GPIO 针脚控制该开关</strong>, 而对该 GPIO 针脚的控制则可以通过代码<strong>获取 SoC 的温度</strong>,
并根据<strong>判断温度阈值启停</strong>也就是开或者关风扇. 最终实现对风扇的自动开关控制.</p> <h3 id="使用三极管作为风扇开关"><a href="#使用三极管作为风扇开关" class="header-anchor">#</a> 使用三极管作为风扇开关</h3> <p>选用合适的三级管,当它仅工作在 <strong>截止状态</strong> 和 <strong>饱和状态</strong> 时, 那么该三极管就可以是视作为一个开关.</p> <h3 id="使用-python-控制风扇"><a href="#使用-python-控制风扇" class="header-anchor">#</a> 使用 Python 控制风扇</h3> <p>使用以下代码时, 你最有可能修改的是高亮部分的代码</p> <h4 id="auto-fan-py"><a href="#auto-fan-py" class="header-anchor">#</a> auto_fan.py</h4> <div class="language-python line-numbers-mode"><div class="highlight-lines"><br><br><br><br><br><br><br><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br></div><pre class="language-python"><code><span class="token comment">#!/usr/bin/python</span>
<span class="token comment"># -*- coding: utf-8 -*-</span>
<span class="token keyword">from</span> RPi <span class="token keyword">import</span> GPIO
<span class="token keyword">from</span> time <span class="token keyword">import</span> sleep

GPIO<span class="token punctuation">.</span>setmode<span class="token punctuation">(</span>GPIO<span class="token punctuation">.</span>BCM<span class="token punctuation">)</span> <span class="token comment"># 使用BCM引脚模式</span>

channel <span class="token operator">=</span> <span class="token number">17</span>    <span class="token comment"># 使用BCM17(对应物理引脚号11)接口控制开关</span>
start_temp <span class="token operator">=</span> <span class="token number">55</span> <span class="token comment"># 启动风扇的温度阈值(℃)</span>
end_temp <span class="token operator">=</span> <span class="token number">48</span>   <span class="token comment"># 关闭风扇的温度阈值(℃)</span>

GPIO<span class="token punctuation">.</span>setup<span class="token punctuation">(</span>channel<span class="token punctuation">,</span> GPIO<span class="token punctuation">.</span>OUT<span class="token punctuation">,</span> initial <span class="token operator">=</span> GPIO<span class="token punctuation">.</span>LOW<span class="token punctuation">)</span> <span class="token comment"># 初始化控制引脚</span>
is_high <span class="token operator">=</span> GPIO<span class="token punctuation">.</span>LOW <span class="token comment"># 用于标记风扇是否打开 避免频繁调用output</span>

<span class="token keyword">try</span><span class="token punctuation">:</span>
    <span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
        <span class="token comment"># 获取当前SoC温度</span>
        temp <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'/sys/class/thermal/thermal_zone0/temp'</span><span class="token punctuation">)</span>
        temp <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span>temp<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">1000</span>

        <span class="token keyword">if</span> temp <span class="token operator">&gt;</span> start_temp <span class="token keyword">and</span> <span class="token keyword">not</span> is_high<span class="token punctuation">:</span> <span class="token comment"># 当SoC温度超过启动阈值且风扇处于关闭状态</span>
            GPIO<span class="token punctuation">.</span>output<span class="token punctuation">(</span>channel<span class="token punctuation">,</span> GPIO<span class="token punctuation">.</span>HIGH<span class="token punctuation">)</span>   <span class="token comment"># 打开风扇</span>
            is_high <span class="token operator">=</span> GPIO<span class="token punctuation">.</span>HIGH               <span class="token comment"># 标记风扇状态为打开</span>

        <span class="token keyword">elif</span> temp <span class="token operator">&lt;</span> end_temp <span class="token keyword">and</span> is_high<span class="token punctuation">:</span>     <span class="token comment"># 当SoC温度低于关闭阈值且风扇处于打开状态</span>
            GPIO<span class="token punctuation">.</span>output<span class="token punctuation">(</span>channel<span class="token punctuation">,</span> GPIO<span class="token punctuation">.</span>LOW<span class="token punctuation">)</span>    <span class="token comment"># 关闭风扇</span>
            is_high <span class="token operator">=</span> GPIO<span class="token punctuation">.</span>LOW                <span class="token comment"># 标记风扇状态为关闭</span>

        sleep<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token comment"># 每隔10秒监控一次</span>
<span class="token keyword">except</span><span class="token punctuation">:</span>
    <span class="token keyword">pass</span>
<span class="token comment"># 退出时 重置该引脚</span>
GPIO<span class="token punctuation">.</span>cleanup<span class="token punctuation">(</span>channel<span class="token punctuation">)</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><div class="custom-block tip"><p class="custom-block-title">关于阈值的选取</p> <p>这个范围根据自己的喜欢可以自行决定, 我这里选取是根据<a href="https://www.raspberrypi.org/documentation/hardware/raspberrypi/frequency-management.md" target="_blank" rel="noopener noreferrer">RaspberryPi官方文档<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>对过热保护控制的措施决定的.<br>
硬限制为 85℃, 这个温度太高了, 我不希望我的树莓派到达这个温度才启动风扇.<br>
软限制为 60℃, 这个温度看起来可以接受.<br>
所以为了避免树莓派触发软限制, 我选取一个接近 60℃ 但又不会迅速达到 60℃ 的温度 55℃; 这是启动风扇的温度,
为了避免风扇频繁的在阈值边界开开关关, 关闭风扇的温度可以比启动风扇的温度低几度, 我这里选取 48℃.</p></div> <h2 id="下面进行实测"><a href="#下面进行实测" class="header-anchor">#</a> 下面进行实测</h2> <h3 id="实际用到的设备和元器件"><a href="#实际用到的设备和元器件" class="header-anchor">#</a> 实际用到的设备和元器件:</h3> <ul><li>RaspberryPi 4B</li> <li>2个 5V/100mA 散热风扇</li> <li>NPN 三极管 2N5551</li></ul> <p>这个 <code>2N5551</code> 是我随便从积灰的零件工具箱里随手翻出来的, 针脚都有点生锈了(真的很随便, 摸到哪个用哪个, 拿的时候啥型号也没注意看, 是三极管就行😂).<br> <img src="/assets/img/raspberrypi4b-fan-2n5551.b26ddf1b.jpg" alt="2N5551"></p> <h3 id="接线准备"><a href="#接线准备" class="header-anchor">#</a> 接线准备</h3> <h4 id="针脚调整"><a href="#针脚调整" class="header-anchor">#</a> 针脚调整</h4> <p>我要在风扇负极上加装三极管开关, 并希望负极与用于控制的 GPIO 接口相邻, 所以我把正极抽出来, 并与另一条相同接头的杜邦线交换接头; 得到负极与 GPIO 相邻双 pin 接头, 正极独立单 pin 接头. 如下图所示:<br> <img src="/assets/img/raspberry-pi-auto-fan_0.4edd7bcf.jpg" alt="正极与用于 GPIO 控制的杜邦线交换"></p> <h4 id="在负极上加装三极管"><a href="#在负极上加装三极管" class="header-anchor">#</a> 在负极上加装三极管</h4> <div class="custom-block tip"><p class="custom-block-title">NPN三极管针脚识别</p> <p>有字的一面正对自己, 引脚向下, 三跟引脚从左到右分别是:<br>
E-发射极、B-基极、C-集电极.<br> <img src="/assets/img/raspberry-pi-auto-fan_1.0a83d42a.png" alt="TO-92封装"></p></div> <p>把负极从中间剪断, 并将 GPIO 线也剪短至一样的长度, 然后将 GPIO 线与三极管的中间引脚也就是<strong>B-基极</strong>连接.</p> <div class="custom-block warning"><p class="custom-block-title">关于三极管进入饱和状态所需的电压</p> <p>查阅资料后发现 <code>2N5551</code> 的饱和状态电压是 1V, 而 GPIO 的输出电压是 3.3V, 所以理论上要在它们之间串联一个适当的电阻来控制电压, 但是我在实际面包板测试中, 对 <code>2N5551</code> 的基极接入 3.3V 一定时间后并没有产生发热现象, 所以最终风扇改装我并没有在它们之间加装电阻.</p></div> <p>然后再将负极剪断的两端分别接在三极管的左右两端, 分别是<strong>E-发射极</strong>和<strong>C-集电极</strong>;<br>
保险的接法是从风扇出来那条线(它虽然在风扇的负极, 但是对于三极管来说它带正电)接在<strong>C-集电极</strong>, 带接头与 GPIO 线相邻的那条线接在<strong>E-发射极</strong>.</p> <div class="custom-block tip"><p class="custom-block-title">关于三极管的电流方向</p> <p>你可能注意到, 我的接线与上述是相反的. 理论上三极管集电极和发射极之间的电流方向是从集电极流向发射极, 如图所示:<br> <img src="data:image/png;base64,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" alt="电流方向"><br>
但是用作开关仅工作在 <strong>截止状态</strong> 和 <strong>饱和状态</strong> 的三级管似乎在这个时候对极性并没有要求, 因为在饱和状态下, 集电极跟发射极之间理论上是相当于短路的, 所以怎么接应该都没问题.
在我实际面包板测试中, 无论是正接还是反接, 都可以正常控制风扇的开关; 所以, 在下图接线的时候也是很随便的随手抓到哪个线就接哪根线🙃.</p></div> <p><img src="/assets/img/raspberry-pi-auto-fan_2.09e87270.jpg" alt="NPN"></p> <h4 id="对线材以及接口处进行绝缘处理"><a href="#对线材以及接口处进行绝缘处理" class="header-anchor">#</a> 对线材以及接口处进行绝缘处理</h4> <p>我使用的是热缩管<br> <img src="/assets/img/raspberry-pi-auto-fan_4.58e2b8c0.jpg" alt="绝缘处理"></p> <h3 id="安装到树莓派4b"><a href="#安装到树莓派4b" class="header-anchor">#</a> 安装到树莓派4B</h3> <p>将风扇正极接到物理针脚位置 2 或者 4 上, 这两个都是 5V; 根据之前对接口的调整, 风扇的负极跟 GPIO 是相邻的, 所以我选取物理接口 9(接地/负极) 跟 11(BCM17)插入这两根线.<br> <img src="/assets/img/raspberry-pi-auto-fan_7.e5c64897.png" alt="针脚说明"></p> <h4 id="上机效果图"><a href="#上机效果图" class="header-anchor">#</a> 上机效果图</h4> <p><img src="/assets/img/raspberry-pi-auto-fan_6.c369171a.jpg" alt="上机效果"> <img src="/assets/img/raspberry-pi-auto-fan_5.85c8af09.jpg" alt="上机效果"></p> <h3 id="运行温控程序-auto-fan-py"><a href="#运行温控程序-auto-fan-py" class="header-anchor">#</a> 运行温控程序 auto_fan.py</h3> <p>在你创建该程序的目录下执行命令: <code>python auto_fan.py</code></p> <div class="language-shell script line-numbers-mode"><pre class="language-shell"><code>pi@raspberrypi:~ $ python auto_fan.py
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>在使用官方 Raspbian 桌面版时测试通过, 其他系统可能会出现环境问题. 可自行 Google 解决👌</p> <h2 id="还能做些什么"><a href="#还能做些什么" class="header-anchor">#</a> 还能做些什么?</h2> <ul><li>你可以将该 python 程序加入系统自启, 方便重启后不用手动执行.</li> <li>你可能不只是希望控制风扇的开或者关, 你还想根据温度控制风扇的转速?😜</li></ul></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">最后一次更新于:</span> <span class="time">2020-3-18 16:35:27</span></div></footer> <!----> </main></div> <footer data-v-388a5773><p data-v-388a5773>© 2018-present <a href="https://lsun.net/" data-v-388a5773>Youngsun Li</a></p> <p data-v-388a5773>
            Powered by <a href="https://vuepress.vuejs.org/" data-v-388a5773>VuePress</a>.
            Theme by <a href="https://github.com/YoungsunLi/vuepress-theme-concise" data-v-388a5773>concise</a> <br data-v-388a5773> <a href="http://www.beian.miit.gov.cn" data-v-388a5773>桂ICP备18004414号-1</a></p></footer></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.c215e177.js" defer></script><script src="/assets/js/3.cfdf7f78.js" defer></script><script src="/assets/js/4.e0fcf125.js" defer></script>
  </body>
</html>
